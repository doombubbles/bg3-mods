// Arcane Wizard

new entry "Clearcasting_2"
type "PassiveData"
data "DisplayName" "h096d2a11g49edg4fe2gb2e5g431740d574c5"
data "Description" "h23f1149agda6eg4a8bgb2a9g6ab4f9a27562"
data "Icon" "PassiveFeature_RitualCaster_MemorizeSpells"
data "Properties" "Highlighted"
data "StatsFunctorContext" "OnCast"
data "Conditions" "Combat() and HasUseCosts('SpellSlot') and not HasStatus('CLEARCASTING_ACTIVE', context.Source) and not HasStatus('MAG_MAGIC_ITEM_POWERED_CAST', context.Source)"
data "StatsFunctors" "{{- range $lvl := list 1 2 3 4 5 6 -}}IF(SpellPowerLevelEqualTo({{$lvl}})):TriggerRandomCast({{sub 21 $lvl}},,Clearcasting);{{- end -}}"

new entry "Shout_Clearcasting"
type "SpellData"
data "SpellType" "Shout"
using "Shout__WildMagic"
data "SpellProperties" "ApplyStatus(CLEARCASTING,100,-1)"
data "TargetConditions" "Self()"
data "Icon" "PassiveFeature_RitualCaster_MemorizeSpells"
data "DisplayName" "h096d2a11g49edg4fe2gb2e5g431740d574c5"
data "Description" "h23f1149agda6eg4a8bgb2a9g6ab4f9a27562"
data "TooltipStatusApply" "ApplyStatus(CLEARCASTING,100,-1)"

new entry "CLEARCASTING"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "h096d2a11g49edg4fe2gb2e5g431740d574c5"
data "Description" "he1538d27gf1f6g4b28gb68bgef765a93da2d;2"
data "Icon" "PassiveFeature_RitualCaster_MemorizeSpells"
data "Passives" "Clearcasting_Passive"
data "OnRemoveFunctors" "RemoveStatus(CLEARCASTING_ACTIVE)"

new entry "Clearcasting_Passive"
type "PassiveData"
using "MAG_MagicItemPoweredCast_Passive"
data "DisplayName" "h096d2a11g49edg4fe2gb2e5g431740d574c5"
data "Description" "h7d14fd26g6c8eg48d8gaa9cgee7e47ab5af2"
data "Icon" "PassiveFeature_RitualCaster_MemorizeSpells"
data "Properties" "IsToggled;Highlighted;Temporary"
data "Conditions" "IsSpell() and HasStatus('CLEARCASTING_ACTIVE', context.Source)"
data "StatsFunctors" "RemoveStatus(CLEARCASTING_ACTIVE);RemoveStatus(CLEARCASTING)"
data "ToggleOnFunctors" "ApplyStatus(CLEARCASTING_ACTIVE, 100, -1)"
data "ToggleOffFunctors" "RemoveStatus(CLEARCASTING_ACTIVE)"

new entry "CLEARCASTING_ACTIVE"
type "StatusData"
data "StatusType" "BOOST"
using "MAG_MAGIC_ITEM_POWERED_CAST"
data "StackId" "CLEARCASTING_ACTIVE"
data "DisplayName" "h096d2a11g49edg4fe2gb2e5g431740d574c5"
data "Icon" "PassiveFeature_RitualCaster_MemorizeSpells"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"


new entry "Clearcasting"
type "PassiveData"
data "DisplayName" "h096d2a11g49edg4fe2gb2e5g431740d574c5"
data "Description" "hdadbed99gb582g4458gaa14g3414209c1877"
data "DescriptionParams" "1;2"
data "Icon" "PassiveFeature_RitualCaster_MemorizeSpells"
data "Properties" "Highlighted;IsToggled;Temporary"
data "EnabledConditions" "HasActionResource('ArcaneRecoveryPoint', 1, 0, false, false, context.Source)"
data "Boosts" "UnlockSpellVariant(ClearCastingSpellCheck(),ModifyUseCosts(Replace,SpellSlotsGroup,0,-1,SpellSlotsGroup),ModifyUseCosts(Add,ArcaneRecoveryPoint,SpellPowerLevel,0),ModifyTooltipDescription(),ModifyIconGlow());"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_Metamagic_Extended_HeadFX_01:Dummy_HeadFX"
data "ToggleOnFunctors" "ApplyStatus(CLEARCASTING_ON, 100, -1)"
data "ToggleOffFunctors" "RemoveStatus(CLEARCASTING_ON)"

new entry "CLEARCASTING_ON"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "h096d2a11g49edg4fe2gb2e5g431740d574c5"
data "Description" "hdadbed99gb582g4458gaa14g3414209c1877"
data "StackId" "CLEARCASTING_ON"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"



new entry "Savant"
type "PassiveData"
data "DisplayName" "ha3a3048cg0480g41a6gbdf8gaf945e80bbc6"
data "Description" "h244a9a72g71c4g4c42g949cg3e3ff6c96b3f"
data "Icon" "Action_Mag_SpellSlotRestoration"
data "Properties" "Highlighted"
data "Boosts" "ActionResourceReplenishTypeOverride(ArcaneRecoveryPoint,ShortRest)"


new entry "ArcaneIntellect"
type "PassiveData"
data "DisplayName" "h84e066e5g75e7g4d64ga375ga994ea3b3606"
data "Description" "h5ac6cad7g0f2eg4bbfg9ea4ge18c0b6de2f4"
data "DescriptionParams" "2"
data "Icon" "Spell_Divination_ArcaneEye"
data "Properties" "Highlighted"
data "StatsFunctorContext" "OnCreate"
data "StatsFunctors" "ApplyStatus(ARCANE_INTELLECT,100,-1)"

new entry "ARCANE_INTELLECT"
type "StatusData"
data "StatusType" "BOOST"
using "AURA_OF_PROTECTION"
data "DisplayName" "h84e066e5g75e7g4d64ga375ga994ea3b3606"
data "Description" "h5ac6cad7g0f2eg4bbfg9ea4ge18c0b6de2f4"
data "DescriptionParams" "2"
data "DescriptionParams" ""
data "Icon" "Spell_Divination_ArcaneEye"
data "StackId" "ARCANE_INTELLECT"
data "AuraRadius" "30"
data "AuraStatuses" "IF(Ally() and not Tagged('INANIMATE') and Tagged('PLAYABLE')):ApplyStatus(ARCANE_INTELLECT_BUFF)"
data "Boosts" "Ability(Intelligence, 2, 30)"
data "RemoveEvents" ""
data "StatusPropertyFlags" "IgnoreResting;ApplyToDead;DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "ARCANE_INTELLECT_BUFF"
type "StatusData"
data "StatusType" "BOOST"
using "AURA_OF_PROTECTION_BUFF"
data "DisplayName" "h84e066e5g75e7g4d64ga375ga994ea3b3606"
data "Description" "hd14d6e14gb942g4822g96b4g9aaf55e01fc0"
data "DescriptionParams" "2"
data "Icon" "Spell_Divination_ArcaneEye"
data "StackId" "ARCANE_INTELLECT"
data "Boosts" "Ability(Intelligence, 2, 30)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"


new entry "ArcaneMissiles"
type "PassiveData"
data "DisplayName" "h581e77e6g3a7eg45cag93b0gd127a84a8910"
data "Description" "he453229cgfd5eg469cgb540g3dea852c8733"
data "ExtraDescription" "hf88afa74g2837g4c43g8502gae78b5e84495"
data "Icon" "PassiveFeature_Wizard_ArcaneMissiles"
data "Properties" "Highlighted"
data "StatsFunctorContext" "OnCast"
data "Conditions" "HasUseCosts('ArcaneRecoveryPoint',true)"
data "StatsFunctors" "IF(IsCantrip()):ApplyStatus(SELF,ARCANE_MISSILES,100,1);IF(not IsCantrip()):ApplyStatus(SELF,ARCANE_MISSILES,100,SpellPowerLevel)"

new entry "ARCANE_MISSILES"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "h581e77e6g3a7eg45cag93b0gd127a84a8910"
data "Description" "h95635494gadb6g4620ga5b4ge5ad2ae86467"
data "ExtraDescription" "hf88afa74g2837g4c43g8502gae78b5e84495"
data "Icon" "PassiveFeature_Wizard_ArcaneMissiles"
data "StackId" "ARCANE_MISSILES"
data "StackType" "Additive"
data "StatusPropertyFlags" "ApplyToDead;FreezeDuration;DisableCombatlog;DisableOverhead"
data "Passives" "ArcaneMissiles_Cast"


new entry "ArcaneMissiles_Cast"
type "PassiveData"
using "ArcaneMissiles"
data "Description" "h95635494gadb6g4620ga5b4ge5ad2ae86467"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar"
data "Boosts" "{{range $i := untilStep 0 7 1}}IF(StatusDurationEqualOrMoreThan(context.Source,'ARCANE_MISSILES',{{add1 $i}}) and ConditionResult(GetModifier(context.Source.Intelligence) > {{$i}})):UnlockSpellVariant(MagicMissileSpellCheck(),ModifyNumberOfTargets(AdditiveBase,1,true));{{end}}"
data "StatsFunctorContext" "OnCast"
data "Conditions" "MagicMissileSpellCheck()"
data "StatsFunctors" "{{range $i := untilStep 0 7 1}}IF(ConditionResult(GetModifier(context.Source.Intelligence) > {{$i}})):SetStatusDuration(ARCANE_MISSILES,-1,Add);{{end}}"


new entry "PresenceOfMind"
type "PassiveData"
data "DisplayName" "h6bd28040g7116g493bg870eg01085a88c1d7"
data "Description" "h8c3583c5g2b7eg44c3g8a53g7861fd7a25d0"
data "Icon" "PassiveFeature_Wizard_PresenceOfMind"
data "Properties" "Highlighted;IsToggled;Temporary"
data "EnabledContext" "OnActionResourcesChanged;OnStatusApplied;OnStatusRemoved"
data "EnabledConditions" "HasActionResource('ArcaneRecoveryPoint', 2, 0, false, false, context.Source)"
data "Boosts" "IF(HasPassive('Clearcasting',context.Source)):UnlockSpellVariant(ClearCastingSpellCheck() & HasUseCosts('ActionPoint'),ModifyUseCosts(Replace,BonusActionPoint,1,0,ActionPoint),ModifyUseCosts(Add,ArcaneRecoveryPoint,1,0),ModifyTooltipDescription());UnlockSpellVariant(HasUseCosts('ArcaneRecoveryPoint') & HasUseCosts('ActionPoint'),ModifyUseCosts(Replace,BonusActionPoint,1,0,ActionPoint),ModifyUseCosts(Add,ArcaneRecoveryPoint,1,0),ModifyTooltipDescription(),ModifyIconGlow());IF(HasPassive('ArcanePower',context.Source)):UnlockSpellVariant(ArcanePowerCheck() & HasUseCosts('ActionPoint'),ModifyUseCosts(Replace,BonusActionPoint,1,0,ActionPoint),ModifyUseCosts(Add,ArcaneRecoveryPoint,1,0),ModifyTooltipDescription());"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_Metamagic_Quickened_HeadFX_01:Dummy_HeadFX"


new entry "ArcaneBlast"
type "PassiveData"
data "DisplayName" "h7113631cg64d1g4676g9690ga1985ed6c602"
data "Description" "h152be26bg6077g4880g81b6gc9ff72485931"
data "Properties" "IsHidden;DisplayBoostInTooltip"
data "Icon" "Spell_Wizard_ArcaneBlast"
data "Boosts" "UnlockSpell(Projectile_ArcaneBlast);{{range $i := untilStep 1 30 1}}IF(AB({{$i}})):DamageBonus({{$i}});{{end}}"

new entry "Projectile_ArcaneBlast"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_EldritchBlast"
data "DisplayName" "h7113631cg64d1g4676g9690ga1985ed6c602"
data "Description" "h2ec9328dg0026g4eb5g87f3g1d7e4bae5732"
data "ExtraDescription" "hf4f78f20g8956g4ef6gb91eg588fbcee79e5"
data "AmountOfTargets" "1"
data "UseCosts" "ActionPoint:1;ArcaneRecoveryPoint:1"
data "SpellSuccess" "DealDamage(LevelMapValue(D10Cantrip),Force,Magical);"
data "TooltipDamageList" "DealDamage(LevelMapValue(D10Cantrip),Force)"
data "SpellRoll" ""
data "Trajectories" "f533d9a8-58a8-4cd4-b5bc-66e643b58356"
data "PrepareEffect" "51b577f9-e8b6-4e2d-aca5-55775a56e916"
data "CastEffect" "4ada3f14-e061-423e-aa6d-123a8e32baa1"
data "Icon" "Spell_Wizard_ArcaneBlast"

new entry "ArcanePower"
type "PassiveData"
data "DisplayName" "h4439fae5ga407g4b4dga7a3g4f5458ab944f"
data "Description" "h97e20418gbd5cg4be1gba4ag5917999b56da"
data "Icon" "PassiveFeature_RitualCaster_FreeSpells"
data "Properties" "Highlighted;IsToggled;Temporary"
data "EnabledContext" "OnActionResourcesChanged"
data "EnabledConditions" "HasActionResource('ArcaneRecoveryPoint', 1, 0, false, false, context.Source)"
data "Boosts" "UnlockSpellVariant(ArcanePowerCheck(),ModifyUseCosts(Add,ArcaneRecoveryPoint,SpellPowerLevel,0),ModifySpellRoll('not SavingThrow','ArcanaCheck'),ModifySpellRoll('Attack(AttackType.RangedSpellAttack)','ArcanaCheck()'),ModifySpellRoll('Attack(AttackType.MeleeSpellAttack)','ArcanaCheck()'),ModifyTooltipDescription(),ModifyIconGlow());"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_Metamagic_Heightened_HeadFX_01:Dummy_HeadFX"


new entry "PrismaticBarrier"
type "PassiveData"
data "DisplayName" "ha5de1efdg1f3cg4ea6g8432g2875ac31e4a2"
data "Description" "h8e03c6eagbeb4g4547gba73g952f21135431"
data "Icon" "PassiveFeature_Wizard_PrismaticBarrier"
data "Properties" "Highlighted"
data "StatsFunctorContext" "OnCast"
data "Conditions" "HasUseCosts('ArcaneRecoveryPoint',true)"
data "StatsFunctors" "IF(IsCantrip()):ApplyStatus(SELF,PRISMATIC_BARRIER_1,100,-1);{{range $lvl := untilStep 1 7 1}}IF(SpellPowerLevelEqualTo({{$lvl}})):ApplyStatus(SELF,PRISMATIC_BARRIER_{{$lvl}},100,-1);{{end}}"

{{range $lvl := untilStep 1 7 1}}
new entry "PRISMATIC_BARRIER_{{$lvl}}"
type "StatusData"
data "StatusType" "BOOST"
using "FALSE_LIFE"
data "DisplayName" "ha5de1efdg1f3cg4ea6g8432g2875ac31e4a2"
data "DescriptionParams" "{{ mul $lvl 5}}"
data "Icon" "PassiveFeature_Wizard_PrismaticBarrier"
data "StackPriority" "{{ mul $lvl 5}}"
data "Boosts" "TemporaryHP({{ mul $lvl 5}});SpellResistance(Resistant)"
{{end}}


new entry "ArcaneSurge"
type "PassiveData"
data "DisplayName" "haf88e4c2g5d7fg4c65ga134gd0d1660bd0bd"
data "Description" "h1bb72860geacbg49dcg9ad9g6d28246cedf3"
data "Icon" "Spell_Wizard_ArcaneSurge"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Projectile_ArcaneSurge)"

new entry "Projectile_ArcaneSurge"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_EldritchBlast"
data "DisplayName" "haf88e4c2g5d7fg4c65ga134gd0d1660bd0bd"
data "Description" "hb93210ebg5d75g4da9gb641g5d6a6613332d"
data "DescriptionParams" "DealDamage(1d12,Force);DealDamage(1d12,Force)"
data "Icon" "Spell_Wizard_ArcaneSurge"
data "AmountOfTargets" "1"
data "UseCosts" "ActionPoint:1;ArcaneRecoveryPoint:1"
data "TooltipDamageList" "DealDamage(1d12,Force);DealDamage(5d12,Force,,,,ad727a13-c6f0-4b5b-aefd-aac79c6ed46e);"
data "SpellSuccess" ""
data "SpellRoll" ""
data "SpellProperties" ""
data "Trajectories" "f533d9a8-58a8-4cd4-b5bc-66e643b58356"
data "PrepareEffect" "51b577f9-e8b6-4e2d-aca5-55775a56e916"
data "CastEffect" "4ada3f14-e061-423e-aa6d-123a8e32baa1"
data "TargetEffect" "ad77e27f-f91d-4bf0-9756-b576ddc92fad"
data "AreaRadius" "4"
data "ExplodeRadius" "4"
data "DamageType" "Force"
data "Cooldown" "OncePerShortRest"
data "SpellFlags" "HasVerbalComponent;HasSomaticComponent;HasHighGroundRangeExtension;RangeIgnoreVerticalThreshold;IsHarmful;IsLinkedSpellContainer"
data "ContainerSpells" "{{range $lvl := untilStep 1 7 1 }}Projectile_ArcaneSurge_{{$lvl}};{{end}}"

{{range $lvl := untilStep 1 7 1 }}
new entry "Projectile_ArcaneSurge_{{$lvl}}"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_ArcaneSurge"
data "Description" "h18980cffge6b7g4926g9d2fge0439723781f"
data "DescriptionParams" "DealDamage({{$lvl}}d12,Force);{{$lvl}};DealDamage(1d12,Force)"
data "SpellContainerID" "Projectile_ArcaneSurge"
data "ContainerSpells" ""
data "SpellFlags" "HasVerbalComponent;HasSomaticComponent;IsSpell;HasHighGroundRangeExtension;RangeIgnoreVerticalThreshold;IsHarmful"
data "Level" "{{$lvl}}"
data "PowerLevel" "{{$lvl}}"
data "UseCosts" "ActionPoint:1;ArcaneRecoveryPoint:{{$lvl}}"
data "SpellProperties" "GROUND:ApplyStatus(SELF,ARCANE_SURGE,100,{{$lvl}});GROUND:ApplyStatus(SELF,ARCANE_SURGE_RESTORE,100,{{$lvl}});DealDamage({{$lvl}}d12,Force,Magical);"
data "TooltipDamageList" "DealDamage({{$lvl}}d12,Force);
data "TooltipStatusApply" "ApplyStatus(ARCANE_SURGE,100,{{$lvl}});ApplyStatus(ARCANE_SURGE_RESTORE,100,{{$lvl}})"
{{ end }}


new entry "ARCANE_SURGE"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "haf88e4c2g5d7fg4c65ga134gd0d1660bd0bd"
data "Description" "h07c0e890g4778g4b2cgb8d3gac946d345c01"
data "DescriptionParams" "DealDamage(1d12,Force)"
data "Icon" "Spell_Wizard_ArcaneSurge"
data "StackId" "ARCANE_SURGE"
data "StackType" "Overwrite"
data "StatusPropertyFlags" "ApplyToDead;DisableCombatlog;DisableOverhead"
data "Boosts" "IF(IsSpell()):DamageBonus(1d12,Force)"
data "OnRemoveFunctors" "RemoveStatus(SELF,ARCANE_SURGE_RESTORE)"

new entry "ARCANE_SURGE_RESTORE"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "h0e21c6d4ga8c7g4923gaf86gcffdfc9490d9"
data "Description" "h9555ad54gda53g4bbfg8349g1f360cdc5532"
data "Icon" "Spell_Wizard_ArcaneSurge"
data "StackId" "ARCANE_SURGE_RESTORE"
data "StackType" "Overwrite"
data "StatusPropertyFlags" "ApplyToDead;FreezeDuration;DisableCombatlog;DisableOverhead"
data "Passives" "ArcaneSurge_Restore"

new entry "ArcaneSurge_Restore"
type "PassiveData"
data "DisplayName" "h0e21c6d4ga8c7g4923gaf86gcffdfc9490d9"
data "Description" "h9555ad54gda53g4bbfg8349g1f360cdc5532"
data "Icon" "Spell_Wizard_ArcaneSurge"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "IsKillingBlow() and Enemy()"
data "StatsFunctors" "RestoreResource(SELF,ArcaneRecoveryPoint,1,0);SetStatusDuration(SELF,ARCANE_SURGE_RESTORE,-1,Add);"


new entry "Evocation"
type "PassiveData"
data "DisplayName" "h0b460ccbg3ddeg4d0ega637gce3eb626af64"
data "Description" "h3c284733g5fd2g4ddfg9478g1369687d2f8a"
data "Icon" "Skill_Wizard_Evocation"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Shout_Evocation)"

new entry "Shout_Evocation"
type "SpellData"
data "SpellType" "Shout"
using "Shout_Blink"
data "SpellSchool" "Evocation"
data "DisplayName" "h0b460ccbg3ddeg4d0ega637gce3eb626af64"
data "Description" "h9c306580g5063g4827g8c49g0b7c5c46093d"
data "DescriptionParams" "2"
data "ExtraDescription" ""
data "TooltipUpcastDescription" ""
data "Level" ""
data "Icon" "Skill_Wizard_Evocation"
data "SpellFlags" "IsConcentration"
data "UseCosts" "BonusActionPoint:1"
data "TooltipStatusApply" "ApplyStatus(EVOCATION,100,2)"
data "SpellProperties" "RestoreResource(SELF,ArcaneRecoveryPoint,1,0);ApplyStatus(SELF,EVOCATION,100,2)"
data "RequirementConditions" "not HasActionResource('ArcaneRecoveryPoint', 100, 0, true, false, context.Source)"
data "Requirements" ""
data "Cooldown" "OncePerShortRest"

new entry "EVOCATION"
type "StatusData"
data "StatusType" "BOOST"
using "FLY"
data "DisplayName" "h0b460ccbg3ddeg4d0ega637gce3eb626af64"
data "Description" "h5cad71bag9ceag406fg8424g013947ac513a"
data "Icon" "Skill_Wizard_Evocation"
data "StackId" "EVOCATION"
data "Boosts" ""
data "TickType" "StartTurn"
data "TickFunctors" "RestoreResource(SELF,ArcaneRecoveryPoint,1,0)"